# 도메인 정의서

이 문서는 타임 경매 시스템의 주요 도메인 객체들의 역할과 수행 가능한 행동을 정의합니다. 각 행동이 발생하는 상황(언제)도 함께 명시합니다.

---

## 1. Room (방)

*   **역할:**
    *   게임 인스턴스를 관리하는 컨테이너.
    *   게임 시작 전 플레이어들이 모이는 공간.
    *   방의 설정(예: 최대 인원, 게임 규칙)을 정의하고 유지.
*   **행동:**
    *   **방 생성 (Create Room):**
        *   **언제:** 사용자가 새로운 게임을 시작하기 위해 방을 만들고자 할 때.
        *   **설명:** 새로운 게임 방을 만듭니다.
    *   **방 참여 (Join Room):**
        *   **언제:** 사용자가 기존에 생성된 방에 참여하고자 할 때.
        *   **설명:** 사용자가 특정 방에 들어갑니다.
    *   **방 나가기 (Leave Room):**
        *   **언제:** 사용자가 현재 참여 중인 방에서 나가고자 할 때.
        *   **설명:** 사용자가 방에서 나갑니다.
    *   **게임 시작 (Start Game):**
        *   **언제:** 방장이 방에 충분한 플레이어가 모였고, 게임을 시작할 준비가 되었을 때.
        *   **설명:** 방에 있는 플레이어들과 함께 게임을 시작합니다.
    *   **방 목록 조회 (View Room List):**
        *   **언제:** 사용자가 참여할 수 있는 방들을 탐색하고자 할 때.
        *   **설명:** 현재 개설된 방들의 목록을 확인합니다.
    *   **방 설정 업데이트 (Update Room Settings):**
        *   **언제:** 방장이 게임 시작 전 방의 규칙이나 인원 제한 등을 변경하고자 할 때.
        *   **설명:** 방의 설정을 변경합니다.

---

## 2. RoomEntry (방 참가 기록)

*   **역할:**
    *   특정 방에 대한 사용자의 참여 상태를 나타냅니다.
    *   사용자와 방을 연결하며, 방 내에서의 사용자 상태(예: 준비 완료, 게임 중)를 추적합니다.
*   **행동:**
    *   **방 입장 기록 (Enter Room):**
        *   **언제:** 사용자가 방에 성공적으로 참여했을 때.
        *   **설명:** 사용자가 방에 입장했음을 기록합니다.
    *   **방 퇴장 기록 (Exit Room):**
        *   **언제:** 사용자가 방에서 나갔을 때.
        *   **설명:** 사용자가 방에서 퇴장했음을 기록합니다.
    *   **준비 상태 설정 (Set Ready Status):**
        *   **언제:** 방에 참여한 사용자가 게임 시작을 위해 준비가 완료되었음을 알릴 때.
        *   **설명:** 게임 시작을 위한 사용자의 준비 상태를 설정합니다.

---

## 3. Game (게임)

*   **역할:**
    *   전체 게임의 흐름을 조율하고 관리합니다.
    *   라운드 진행을 관리하고, 게임의 현재 상태를 추적합니다.
    *   게임의 최종 승자를 결정하고 결과를 기록합니다.
*   **행동:**
    *   **게임 시작 (Start Game):**
        *   **언제:** Room에서 게임 시작 명령이 내려졌을 때.
        *   **설명:** 게임을 초기화하고 시작합니다.
    *   **게임 종료 (End Game):**
        *   **언제:** 모든 라운드가 종료되거나, 특정 종료 조건(예: 모든 플레이어의 타임 소진)이 충족되었을 때.
        *   **설명:** 게임을 종료하고 최종 결과를 확정합니다.
    *   **라운드 전환 (Transition Between Rounds):**
        *   **언제:** 현재 라운드가 종료되고 다음 라운드를 시작할 준비가 되었을 때.
        *   **설명:** 다음 라운드로 넘어갑니다.
    *   **최종 결과 기록 (Record Final Results):**
        *   **언제:** 게임이 완전히 종료된 후, 최종 승자 및 점수 등을 확정할 때.
        *   **설명:** 게임의 최종 결과를 저장합니다.

---

## 4. GameEntry (게임 참가 기록)

*   **역할:**
    *   특정 게임에 대한 사용자의 참여 상태를 나타냅니다.
    *   사용자와 게임을 연결하며, 사용자별 게임 데이터(예: 초기 타임 지갑, 점수)를 추적합니다.
*   **행동:**
    *   **게임 참여 (Join Game):**
        *   **언제:** RoomEntry를 통해 방에 참여한 사용자가 게임이 시작될 때 자동으로 게임에 참여될 때.
        *   **설명:** (RoomEntry를 통해 암묵적으로) 게임에 참여합니다.
    *   **타임 지갑 업데이트 (Update Time Wallet):**
        *   **언제:** 라운드에서 입찰에 성공하거나 실패하여 타임이 증감될 때, 또는 게임 시작 시 초기 타임이 지급될 때.
        *   **설명:** 사용자의 타임 지갑 잔액을 업데이트합니다.
    *   **개인 게임 통계 조회 (View Personal Game Stats):**
        *   **언제:** 사용자가 게임 진행 중 또는 게임 종료 후 자신의 성과를 확인하고자 할 때.
        *   **설명:** 자신의 게임 통계를 확인합니다.

---

## 5. Round (라운드)

*   **역할:**
    *   게임 내에서 단일 입찰 단계를 관리합니다.
    *   입찰 과정을 관리하고, 라운드 승자를 결정합니다.
    *   현재 입찰가, 남은 시간 등을 추적합니다.
*   **행동:**
    *   **라운드 시작 (Start Round):**
        *   **언제:** Game에서 다음 라운드 시작 명령이 내려졌을 때.
        *   **설명:** 라운드를 시작하고 입찰을 받기 시작합니다.
    *   **라운드 종료 (End Round):**
        *   **언제:** 라운드 제한 시간이 모두 소진되거나, 모든 플레이어가 입찰을 포기했을 때.
        *   **설명:** 라운드를 종료하고 입찰을 마감합니다.
    *   **입찰 접수 (Receive Bids):**
        *   **언제:** 라운드 진행 중 플레이어가 타임을 사용하여 입찰을 시도할 때.
        *   **설명:** 사용자들의 입찰을 받습니다.
    *   **라운드 승자 결정 (Determine Round Winner):**
        *   **언제:** 라운드가 종료된 후, 가장 높은 타임을 제시했거나 특정 조건(예: 가장 적은 타임으로 낙찰)을 만족하는 플레이어를 찾을 때.
        *   **설명:** 라운드의 승자를 결정합니다.
    *   **라운드 상태 업데이트 (Update Round Status):**
        *   **언제:** 라운드의 진행 상황(예: 입찰 중, 종료 임박)이 변경될 때.
        *   **설명:** 라운드의 진행 상태를 업데이트합니다.

---

## 6. RoundParticipation (라운드 참가 기록)

*   **역할:**
    *   특정 라운드에 대한 사용자의 참여 상태를 나타냅니다.
    *   사용자와 라운드를 연결하며, 해당 라운드에서의 사용자의 입찰 정보 및 사용한 시간을 추적합니다.
*   **행동:**
    *   **입찰 제출 (Place Bid):**
        *   **언제:** 라운드 진행 중 사용자가 특정 타임을 사용하여 입찰을 시도할 때.
        *   **설명:** 라운드에 입찰을 제출합니다.
    *   **자신 입찰 조회 (View Own Bid):**
        *   **언제:** 사용자가 현재 라운드에서 자신이 제출한 입찰 정보를 확인하고자 할 때.
        *   **설명:** 자신이 제출한 입찰을 확인합니다.
    *   **라운드 결과 조회 (View Round Outcome):**
        *   **언제:** 라운드가 종료된 후, 사용자가 해당 라운드의 결과를 확인하고자 할 때.
        *   **설명:** 라운드의 결과를 확인합니다.

---

## 7. BidLog (입찰 기록)

*   **역할:**
    *   타임 경매에서 발생한 모든 입찰 내역을 시간 순서대로 기록하고 저장합니다.
    *   각 입찰의 주체, 사용된 타임, 입찰 시점 등의 상세 정보를 포함하여 감사 및 분석을 위한 이력 데이터를 제공합니다.
*   **행동:**
    *   **입찰 기록 (Record Bid):**
        *   **언제:** 플레이어가 라운드에 타임을 사용하여 입찰을 시도할 때마다.
        *   **설명:** 사용자의 입찰 정보(누가, 얼마의 타임을, 언제 사용했는지)를 저장합니다.
    *   **입찰 이력 조회 (Retrieve Bid History):**
        *   **언제:** 특정 라운드 또는 게임의 모든 입찰 내역을 확인하거나, 플레이어의 입찰 패턴을 분석하고자 할 때.
        *   **설명:** 과거 입찰 기록을 조회합니다.

---

## 8. BidResult (입찰 결과)

*   **역할:**
    *   각 라운드의 최종 입찰 결과를 저장합니다.
    *   라운드 승자, 낙찰에 사용된 타임, 낙찰된 아이템(또는 권리), 그리고 승자의 타임 지갑에서 차감된 최종 타임 등 라운드의 핵심 결과를 기록합니다.
*   **행동:**
    *   **라운드 결과 기록 (Record Round Result):**
        *   **언제:** 라운드가 종료되고 승자가 결정된 후, 해당 라운드의 최종 결과를 확정할 때.
        *   **설명:** 라운드의 최종 결과(승자, 낙찰 타임, 차감 타임 등)를 저장합니다.
    *   **라운드 결과 조회 (Retrieve Round Results):**
        *   **언제:** 게임 진행 중 또는 게임 종료 후, 특정 라운드의 결과를 확인하고자 할 때.
        *   **설명:** 특정 라운드의 결과를 조회합니다.